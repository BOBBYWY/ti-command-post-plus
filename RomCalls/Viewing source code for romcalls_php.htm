<html><head><title>Viewing source code for romcalls.php</title></head><body><code><font color="#000000">
<font color="#0000BB">&lt;?<br />$dir </font><font color="#007700">= </font><font color="#0000BB">opendir</font><font color="#007700">(</font><font color="#DD0000">'C:/tigcc-linux/doc/html'</font><font color="#007700">);<br /></font><font color="#0000BB">readdir</font><font color="#007700">(</font><font color="#0000BB">$dir</font><font color="#007700">);<br /></font><font color="#0000BB">readdir</font><font color="#007700">(</font><font color="#0000BB">$dir</font><font color="#007700">);<br /></font><font color="#0000BB">$totalentries </font><font color="#007700">= -</font><font color="#0000BB">1</font><font color="#007700">;<br /></font><font color="#0000BB">$bigarray </font><font color="#007700">= array();<br />while (</font><font color="#0000BB">$file </font><font color="#007700">= </font><font color="#0000BB">readdir</font><font color="#007700">(</font><font color="#0000BB">$dir</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$fi </font><font color="#007700">= </font><font color="#0000BB">implode</font><font color="#007700">(</font><font color="#DD0000">''</font><font color="#007700">,</font><font color="#0000BB">file</font><font color="#007700">(</font><font color="#DD0000">'C:/tigcc-linux/doc/html/'</font><font color="#007700">.</font><font color="#0000BB">$file</font><font color="#007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">strstr</font><font color="#007700">(</font><font color="#0000BB">$fi</font><font color="#007700">,</font><font color="#DD0000">'Function (ROM Call '</font><font color="#007700">) || </font><font color="#0000BB">strstr</font><font color="#007700">(</font><font color="#0000BB">$fi</font><font color="#007700">,</font><font color="#DD0000">'Variable (ROM Call '</font><font color="#007700">)</font><font color="#FF8000">/* &amp;&amp; !strstr($fi,'unknown.h')*/</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$str </font><font color="#007700">= </font><font color="#0000BB">strstr</font><font color="#007700">(</font><font color="#0000BB">$fi</font><font color="#007700">,</font><font color="#DD0000">'&lt;TD CLASS="TITLE"&gt;'</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$name </font><font color="#007700">= </font><font color="#0000BB">strip_tags</font><font color="#007700">(</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$str</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">strpos</font><font color="#007700">(</font><font color="#0000BB">$str</font><font color="#007700">,</font><font color="#DD0000">'&lt;/TD&gt;'</font><font color="#007700">)+</font><font color="#0000BB">5</font><font color="#007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$str </font><font color="#007700">= </font><font color="#0000BB">strstr</font><font color="#007700">(</font><font color="#0000BB">$fi</font><font color="#007700">,</font><font color="#DD0000">'&lt;TD CLASS="DESCRIPTION"&gt;'</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$tmp </font><font color="#007700">= </font><font color="#0000BB">str_replace</font><font color="#007700">(</font><font color="#DD0000">'Function '</font><font color="#007700">, </font><font color="#DD0000">''</font><font color="#007700">, </font><font color="#0000BB">strip_tags</font><font color="#007700">(</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$str</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">strpos</font><font color="#007700">(</font><font color="#0000BB">$str</font><font color="#007700">,</font><font color="#DD0000">'&lt;/TD&gt;'</font><font color="#007700">)+</font><font color="#0000BB">5</font><font color="#007700">)));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">preg_match</font><font color="#007700">(</font><font color="#DD0000">"/ll ([^*)]+)/"</font><font color="#007700">, </font><font color="#0000BB">$tmp</font><font color="#007700">, </font><font color="#0000BB">$matches</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$num </font><font color="#007700">= </font><font color="#0000BB">$matches</font><font color="#007700">[</font><font color="#0000BB">1</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bigarray</font><font color="#007700">[</font><font color="#0000BB">$name</font><font color="#007700">] = </font><font color="#0000BB">$num</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$totalentries</font><font color="#007700">++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></font><font color="#0000BB">$decarray </font><font color="#007700">= array();<br />foreach (</font><font color="#0000BB">$bigarray </font><font color="#007700">as </font><font color="#0000BB">$i </font><font color="#007700">=&gt; </font><font color="#0000BB">$hexnum</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$decarray</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">] = </font><font color="#0000BB">hexdec</font><font color="#007700">(</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$hexnum</font><font color="#007700">,</font><font color="#0000BB">2</font><font color="#007700">,</font><font color="#0000BB">strlen</font><font color="#007700">(</font><font color="#0000BB">$hexnum</font><font color="#007700">)-</font><font color="#0000BB">2</font><font color="#007700">));<br /></font><font color="#0000BB">asort</font><font color="#007700">(</font><font color="#0000BB">$decarray</font><font color="#007700">);<br /></font><font color="#0000BB">$bigarray </font><font color="#007700">= array();<br /></font><font color="#0000BB">$prevnum </font><font color="#007700">= -</font><font color="#0000BB">1</font><font color="#007700">;<br />foreach (</font><font color="#0000BB">$decarray </font><font color="#007700">as </font><font color="#0000BB">$i </font><font color="#007700">=&gt; </font><font color="#0000BB">$decnum</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$decnum </font><font color="#007700">!= </font><font color="#0000BB">$prevnum</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bigarray</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">] = </font><font color="#DD0000">'$'</font><font color="#007700">.</font><font color="#0000BB">dechex</font><font color="#007700">(</font><font color="#0000BB">$decnum</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$prevnum </font><font color="#007700">= </font><font color="#0000BB">$decnum</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></font><font color="#0000BB">$filehead </font><font color="#007700">= </font><font color="#DD0000">"_nostub\r\n_ti89\r\n\r\n xdef _nostub\r\n xdef _ti89\r\n\r\nBegin:\r\n\tdc.w (LookupTableEnd-LookupTable-4)/4\r\nLookupTable:\r\n"</font><font color="#007700">;<br /></font><font color="#0000BB">$names </font><font color="#007700">= </font><font color="#DD0000">""</font><font color="#007700">;<br /></font><font color="#0000BB">$nums </font><font color="#007700">= </font><font color="#DD0000">""</font><font color="#007700">;<br /></font><font color="#0000BB">$i </font><font color="#007700">= </font><font color="#0000BB">0</font><font color="#007700">;<br />foreach (</font><font color="#0000BB">$bigarray </font><font color="#007700">as </font><font color="#0000BB">$name </font><font color="#007700">=&gt; </font><font color="#0000BB">$num</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$names </font><font color="#007700">.= </font><font color="#DD0000">".LC$i: dc.b '$name',0</font><font color="#007700">\r\n</font><font color="#DD0000">"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$nums </font><font color="#007700">.= </font><font color="#DD0000">"</font><font color="#007700">\t</font><font color="#DD0000">dc.w $num</font><font color="#007700">\r\n\t</font><font color="#DD0000">dc.w .LC$i-Begin</font><font color="#007700">\r\n</font><font color="#DD0000">"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$i</font><font color="#007700">++;<br />}<br /></font><font color="#0000BB">$nums </font><font color="#007700">.= </font><font color="#DD0000">"LookupTableEnd:\r\n"</font><font color="#007700">;<br /></font><font color="#0000BB">$file </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"romcalls.asm"</font><font color="#007700">,</font><font color="#DD0000">"w"</font><font color="#007700">);<br /></font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">, </font><font color="#DD0000">"$filehead$nums</font><font color="#007700">\r\n</font><font color="#DD0000">Strings:</font><font color="#007700">\r\n</font><font color="#DD0000">$names"</font><font color="#007700">);<br /></font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code><hr><a href='romcalls.php'>Click here to go to romcalls.php</a></body></html>